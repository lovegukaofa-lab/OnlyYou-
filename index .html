<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel Bear</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
(function(){
  emailjs.init("E3B4DtWnq-mAjmVH2");
})();
</script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Press Start 2P',cursive;
  background:linear-gradient(#9be7ff,#ffd6e8);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
#game{
  background:#fff;
  border:6px solid #000;
  width:95%;
  max-width:420px;
  min-height:560px;
  padding:20px;
  text-align:center;
  box-shadow:8px 8px 0 #000;
  position:relative;
}
.bear{font-size:64px;margin-bottom:10px}
.box{
  border:4px solid #000;
  padding:16px;
  background:#fffaf0;
  box-shadow:4px 4px 0 #000;
  min-height:120px;
  line-height:1.8;
}
#answers{margin-top:16px;position:relative;min-height:120px}
button{
  font-family:'Press Start 2P';
  font-size:12px;
  padding:14px;
  margin:6px;
  border:3px solid #000;
  background:#ffb6c1;
  box-shadow:3px 3px 0 #000;
  cursor:pointer;
}
button:active{
  transform:translate(2px,2px);
  box-shadow:1px 1px 0 #000;
}
#noBtn{position:absolute}
.heart{
  position:absolute;
  font-size:22px;
  animation:floatUp 2.5s linear forwards;
  pointer-events:none;
}
@keyframes floatUp{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-120px) scale(1.4)}
}
#lockScreen{
  position:fixed;
  inset:0;
  background:linear-gradient(#9be7ff,#ffd6e8);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:9999;
}
#lockScreen input{
  font-family:'Press Start 2P';
  padding:12px;
  border:3px solid #000;
  width:220px;
  text-align:center;
  margin-bottom:10px;
}
.musicBtn{
  position:absolute;
  top:10px;
  right:10px;
  font-size:10px;
}
</style>
</head>

<body>

<div id="lockScreen">
  <div class="bear">üß∏üíñ</div>
  <div class="box" id="lockText">‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠ + ‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞</div>
  <input id="nameInput" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠">
  <input id="passwordInput" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö">
  <button onclick="checkPassword()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
</div>

<div id="game">
  <button class="musicBtn" onclick="toggleMusic()">üéµ</button>
  <audio id="bgm" loop>
    <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_5c8a6b1c5a.mp3">
  </audio>

  <div class="bear" id="bear">üß∏</div>
  <div class="box" id="question"></div>
  <div id="answers"></div>
</div>

<script>
const PASSWORD="foryouonly";
const SERVICE="service_zjx66ht";
const TEMPLATE="template_i8e6p38";

const bear=document.getElementById("bear");
const qBox=document.getElementById("question");
const aBox=document.getElementById("answers");
const bgm=document.getElementById("bgm");

let userName="";
let step=0, shyCount=0, yesScale=1;
let result={};

const questions=[
 {q:"‡∏ñ‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?",a:["‡∏ô‡∏≠‡∏ô","‡∏î‡∏π‡∏ã‡∏µ‡∏£‡∏µ‡∏™‡πå","‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏¥‡∏ô","‡∏°‡∏µ‡∏Ñ‡∏ô‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢"]},
 {q:"‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏±‡πâ‡∏¢?",a:["‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å","‡∏Å‡πá‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å","‡∏Ñ‡∏ô‡∏ñ‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Å‡∏ß‡πà‡∏≤"]},
 {q:"‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ñ‡∏ô‡∏ä‡∏ß‡∏ô‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ?",a:["‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏ô‡πâ‡∏≤","‡∏Ç‡∏≠‡∏Ñ‡∏¥‡∏î‡∏Å‡πà‡∏≠‡∏ô","‡πÑ‡∏õ‡∏™‡∏¥","‡∏´‡∏ô‡∏µ‡πÅ‡∏ï‡πà‡∏´‡∏ô‡∏µ‡πÑ‡∏°‡πà‡∏û‡πâ‡∏ô"]},
 {q:"‡∏ä‡∏≠‡∏ö‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏ô‡∏ß‡πÑ‡∏´‡∏ô?",a:["‡∏ï‡∏•‡∏Å","‡πÇ‡∏£‡πÅ‡∏°‡∏ô‡∏ï‡∏¥‡∏Å","‡∏™‡∏¢‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç","‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ"]},
 {q:"‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡∏ô‡πâ‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?",a:["‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß","‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢","‡πÇ‡∏Å‡πÇ‡∏Å‡πâ"]},
 {q:"‡∏ä‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô?",a:["‡∏ó‡∏∞‡πÄ‡∏•","‡∏†‡∏π‡πÄ‡∏Ç‡∏≤","‡πÄ‡∏î‡∏¥‡∏ô‡∏õ‡πà‡∏≤"]}
];

const sad1=["‡πÄ‡∏≠‡πä‡∏∞‚Ä¶ ‡∏´‡∏ô‡∏µ‡∏ó‡∏≥‡πÑ‡∏° üò≥","‡∏´‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏ñ‡∏≤‡∏°‡πÄ‡∏≠‡∏á‡∏ô‡∏∞","‡∏•‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏°‡∏±‡πâ‡∏¢ üß∏"];
const sad2=["‡πÅ‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á‡∏ô‡∏∞‚Ä¶ üòî","‡∏´‡∏°‡∏µ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏õ‡πä‡∏≠‡∏õ‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß üçø","‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏≤‡∏Ñ‡∏¥‡∏î‡πÑ‡∏õ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß üò¢"];
const sad3=["‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞ ‡∏´‡∏°‡∏µ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à üíî","‡πÅ‡∏ï‡πà‡∏´‡∏°‡∏µ‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏£‡∏≠ üß∏","‡πÇ‡∏≠‡πÄ‡∏Ñ‚Ä¶ ‡πÑ‡∏°‡πà‡∏´‡∏ô‡∏µ‡πÅ‡∏•‡πâ‡∏ß üòû"];

function checkPassword(){
  if(passwordInput.value===PASSWORD && nameInput.value){
    userName=nameInput.value;
    lockScreen.style.display="none";
    bgm.play();
    next();
  }else lockText.innerHTML="‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏µ‡∏£‡∏≠ü•∫";
}

function toggleMusic(){
  bgm.paused?bgm.play():bgm.pause();
}

function typeText(t,cb){
  qBox.innerHTML="";
  let i=0;
  const id=setInterval(()=>{
    qBox.innerHTML+=t[i++];
    if(i>=t.length){clearInterval(id);cb&&cb();}
  },40);
}

function heart(){
  const h=document.createElement("div");
  h.className="heart";
  h.textContent="üíñ";
  h.style.left=Math.random()*80+10+"%";
  h.style.bottom="20px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),2500);
}

function next(){
  aBox.innerHTML="";
  if(step<questions.length){
    typeText(questions[step].q,()=>{
      questions[step].a.forEach(ans=>{
        const b=document.createElement("button");
        b.textContent=ans;
        b.onclick=()=>{step++;next()};
        aBox.appendChild(b);
      });
    });
  }else finalQ();
}

function finalQ(){
  qBox.innerHTML="";aBox.innerHTML="";
  typeText(`${userName}‚Ä¶ ‡πÑ‡∏õ‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏°‡∏±‡πâ‡∏¢?`,()=>{
    const yes=document.createElement("button");
    yes.textContent="‡πÑ‡∏õ‡∏™‡∏¥ üíï";
    yes.onclick=()=>{heart();chooseMovie()};

    const no=document.createElement("button");
    no.textContent="‡πÑ‡∏°‡πà‡πÑ‡∏õ‡∏≠‡πà‡∏∞";
    no.id="noBtn";

    function run(){
      shyCount++;
      yesScale+=0.15;
      yes.style.transform=`scale(${yesScale})`;
      let t=shyCount<=2?sad1:shyCount<=4?sad2:sad3;
      qBox.innerHTML=t[Math.floor(Math.random()*t.length)];
      no.style.left=Math.random()*200+"px";
      no.style.top=Math.random()*80+"px";
    }
    no.onmouseover=run;
    no.ontouchstart=e=>{e.preventDefault();run()};

    aBox.appendChild(yes);
    aBox.appendChild(no);
  });
}

function chooseMovie(){
  typeText("‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏ô‡∏ß‡πÑ‡∏´‡∏ô?",()=>{
    aBox.innerHTML="";
    ["‡∏ï‡∏•‡∏Å","‡πÇ‡∏£‡πÅ‡∏°‡∏ô‡∏ï‡∏¥‡∏Å","‡∏™‡∏¢‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç","‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ"].forEach(m=>{
      const b=document.createElement("button");
      b.textContent="üé¨ "+m;
      b.onclick=()=>{result.movie=m;chooseDay()};
      aBox.appendChild(b);
    });
  });
}

function chooseDay(){
  typeText("‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô?",()=>{
    aBox.innerHTML="";
    ["‡πÄ‡∏™‡∏≤‡∏£‡πå","‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå","‡∏ß‡∏±‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤"].forEach(d=>{
      const b=document.createElement("button");
      b.textContent=d;
      b.onclick=()=>{result.day=d;endGame()};
      aBox.appendChild(b);
    });
  });
}

function endGame(){
  qBox.innerHTML="";aBox.innerHTML="";
  bear.textContent="üêªüíñ";

  emailjs.send(SERVICE,TEMPLATE,{
    name:userName,
    movie:result.movie,
    day:result.day
  });

  const lines=[
    `‡∏´‡∏°‡∏µ‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡∏ô‡∏∞ ${userName} üíï`,
    `üé¨ ${result.movie}`,
    `üìÖ ${result.day}`,
    "‡∏´‡∏°‡∏µ‡∏£‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏ô‡∏∞ üß∏‚ù§Ô∏è"
  ];
  let i=0;
  function show(){
    if(i<lines.length){
      const d=document.createElement("div");
      d.style.margin="8px 0";
      d.textContent=lines[i++];
      qBox.appendChild(d);
      heart();
      setTimeout(show,800);
    }
  }
  show();
}
</script>
</body>
</html>